<Window x:Class="StretchReminderApp.UI.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Settings" Height="550" Width="600"
        WindowStartupLocation="CenterScreen"
        Background="#F5F5F5">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <TextBlock Grid.Row="0" Text="Notification Settings" 
                   FontSize="22" FontWeight="SemiBold" Margin="0,0,0,20"
                   Foreground="#2E7D32"/>

        <!-- Reminder Interval Configuration -->
        <GroupBox Grid.Row="1" Header="Reminder Interval" Margin="0,0,0,15" Padding="10">
            <StackPanel>
                <!-- Days/Hours/Minutes inputs -->
                <Grid Margin="0,10,0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="60"/>
                        <ColumnDefinition Width="20"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="60"/>
                        <ColumnDefinition Width="20"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="60"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Days -->
                    <TextBlock Grid.Column="0" Text="Days:" VerticalAlignment="Center"/>
                    <TextBox Grid.Column="1" x:Name="DaysTextBox" 
                             VerticalAlignment="Center" TextAlignment="Center"
                             PreviewTextInput="NumberTextBox_PreviewTextInput"
                             TextChanged="IntervalTextBox_TextChanged"/>

                    <!-- Hours -->
                    <TextBlock Grid.Column="3" Text="Hours:" VerticalAlignment="Center"/>
                    <TextBox Grid.Column="4" x:Name="HoursTextBox" 
                             VerticalAlignment="Center" TextAlignment="Center"
                             PreviewTextInput="NumberTextBox_PreviewTextInput"
                             TextChanged="IntervalTextBox_TextChanged"/>

                    <!-- Minutes -->
                    <TextBlock Grid.Column="6" Text="Minutes:" VerticalAlignment="Center"/>
                    <TextBox Grid.Column="7" x:Name="MinutesTextBox" 
                             VerticalAlignment="Center" TextAlignment="Center"
                             PreviewTextInput="NumberTextBox_PreviewTextInput"
                             TextChanged="IntervalTextBox_TextChanged"/>
                </Grid>

                <!-- Effective interval text -->
                <TextBlock x:Name="EffectiveIntervalText" 
                          FontWeight="SemiBold" Margin="0,10,0,0"
                          Text="Reminder every: 2 hours"/>

                <!-- Dev Mode -->
                <Border Margin="0,10,0,0" Padding="10" Background="#F0F0F0" 
                        BorderBrush="#CCCCCC" BorderThickness="1" CornerRadius="4">
                    <StackPanel>
                        <CheckBox x:Name="DevModeCheckbox" Content="Development Mode (Short Intervals)"
                                  Checked="DevModeCheckbox_Checked" Unchecked="DevModeCheckbox_Checked"/>

                        <Grid Margin="20,5,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="60"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <TextBlock Grid.Column="0" Text="Minutes:" VerticalAlignment="Center"/>
                            <TextBox Grid.Column="1" x:Name="DevModeMinutesTextBox" 
                                     VerticalAlignment="Center" TextAlignment="Center" IsEnabled="False"
                                     PreviewTextInput="NumberTextBox_PreviewTextInput"
                                     TextChanged="DevModeMinutesTextBox_TextChanged"/>
                        </Grid>
                    </StackPanel>
                </Border>
            </StackPanel>
        </GroupBox>

        <!-- Application Settings -->
        <GroupBox Grid.Row="2" Header="Application Settings" Margin="0,0,0,15" Padding="10">
            <StackPanel>
                <!-- Startup Option -->
                <CheckBox Grid.Row="4" x:Name="StartWithWindowsCheckbox"
                          Content="Start with Windows" Margin="0,5,0,10"
                          FontSize="14"/>

                <!-- Sound Notification -->
                <CheckBox Grid.Row="5" x:Name="SoundNotificationCheckbox"
                          Content="Play sound when notification appears" Margin="0,0,0,5"
                          FontSize="14"/>
            </StackPanel>
        </GroupBox>

        <!-- Stretching Options -->
        <Expander Grid.Row="3" Header="Stretching Options" Margin="0,0,0,15"
                  FontSize="16" FontWeight="Medium" Foreground="#2E7D32"
                  Background="Transparent" BorderThickness="0"
                  IsExpanded="True">
            <StackPanel Margin="10,10,0,0">
                <!-- Required stretches -->
                <TextBlock Text="Required stretches to complete a session:" 
                           Margin="0,0,0,5" FontSize="14"/>

                <Grid Margin="0,0,0,15">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <Slider Grid.Column="0" x:Name="StretchCountSlider" 
                            Minimum="3" Maximum="10"
                            TickFrequency="1" IsSnapToTickEnabled="True"
                            Value="5" ValueChanged="StretchCountSlider_ValueChanged"/>

                    <TextBlock Grid.Column="1" x:Name="StretchCountText" 
                               Text="5 stretches" Margin="10,0,0,0"
                               VerticalAlignment="Center"/>
                </Grid>

                <!-- Pose detection threshold -->
                <TextBlock Text="Pose detection sensitivity:" 
                           Margin="0,0,0,5" FontSize="14"/>

                <Grid Margin="0,0,0,15">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <Slider Grid.Column="0" x:Name="ThresholdSlider" 
                            Minimum="0.5" Maximum="0.9"
                            TickFrequency="0.05" IsSnapToTickEnabled="True"
                            Value="0.7" ValueChanged="ThresholdSlider_ValueChanged"/>

                    <TextBlock Grid.Column="1" x:Name="ThresholdText" 
                               Text="Medium" Margin="10,0,0,0"
                               VerticalAlignment="Center"/>
                </Grid>

                <!-- Motivation messages -->
                <CheckBox x:Name="MotivationCheckbox" 
                          Content="Show motivational messages" 
                          IsChecked="True" Margin="0,0,0,15"/>
            </StackPanel>
        </Expander>

        <!-- Developer Options -->
        <Expander Grid.Row="4" Header="Developer Options" Margin="0,0,0,15"
                  FontSize="16" FontWeight="Medium" Foreground="#2E7D32"
                  Background="Transparent" BorderThickness="0"
                  IsExpanded="False" VerticalAlignment="Top">
            <StackPanel Margin="10,10,0,0">
                <!-- Model path -->
                <TextBlock Text="Model path:" Margin="0,0,0,5" FontSize="14"/>

                <Grid Margin="0,0,0,15">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <TextBox Grid.Column="0" x:Name="ModelPathTextBox"
                             Text="Models/stretch_detection_model.pb"/>

                    <Button Grid.Column="1" Content="Browse" Margin="10,0,0,0"
                            Padding="10,0" Click="BrowseButton_Click"/>
                </Grid>

                <!-- Test notification button -->
                <Button Content="Test Notification" HorizontalAlignment="Left"
                        Padding="10,5" Margin="0,0,0,10"
                        Click="TestNotificationButton_Click"/>
            </StackPanel>
        </Expander>

        <!-- Action Buttons -->
        <Grid Grid.Row="8" Margin="0,15,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- Reset to Defaults Button -->
            <Button Grid.Column="0" x:Name="ResetButton" 
                    Content="Reset to Defaults" HorizontalAlignment="Left"
                    Click="ResetButton_Click" Width="120" Height="35"
                    Background="Transparent" BorderBrush="#2E7D32"
                    Foreground="#2E7D32" BorderThickness="1">
                <Button.Resources>
                    <Style TargetType="Border">
                        <Setter Property="CornerRadius" Value="4"/>
                    </Style>
                </Button.Resources>
            </Button>

            <Button Grid.Column="1" x:Name="CancelButton" Content="Cancel" 
                    Width="100" Height="35" Margin="0,0,10,0"
                    Click="CancelButton_Click" Background="#DDDDDD"
                    Foreground="Black" BorderThickness="0">
                <Button.Resources>
                    <Style TargetType="Border">
                        <Setter Property="CornerRadius" Value="4"/>
                    </Style>
                </Button.Resources>
            </Button>

            <Button Grid.Column="2" x:Name="SaveButton" Content="Save" 
                    Width="100" Height="35"
                    Click="SaveButton_Click" Background="#2E7D32"
                    Foreground="White" BorderThickness="0">
                <Button.Resources>
                    <Style TargetType="Border">
                        <Setter Property="CornerRadius" Value="4"/>
                    </Style>
                </Button.Resources>
            </Button>
        </Grid>
    </Grid>
</Window>